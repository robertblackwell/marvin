<!DOCTYPE html>
<html>
<head>
<title>MarvinTitle</title>
<link rel="stylesheet" href="./css/master.css">

<style>
	.report{
		border: 1px solid #888888; 
		background-color:#CCCCCC;

		cursor:pointer;
		padding : 0px;
		margin: 10px;
	}
	.report-header{
		padding : 5px 10px 5px 10px;

	}
	.report-request {
		background-color:#FFFFEE; 
		border-top: 1px solid black;
		padding : 5px 10px 5px 10px;
	}
	.report-request  h4, .report-response h4{
		margin: 5px;
	}
	.report-response {
		background-color:#EEFFEE; 
		border-top: 1px solid black;
		padding : 5px 10px 5px 10px;
	}
</style>
<script type="text/javascript">

document.addEventListener("DOMContentLoaded",()=>{
	const {ipcRenderer} 	= require('electron')
	const Channel			= require('./src/channels')
	const MainController 	= require("./src/viewer/controllers/main-controller")
	
	const mainController = new MainController()

	/**
	* Send main menu events to the renderer process for the mainWindow -- the main menu
	* only operates on the main window and only via calls to mainController methods
	*/
	ipcRenderer.on("menu-record-clear",()=>{
		console.log("mainWindow receiving clear")
		mainController.clearReports()
	})

	/**
	* receive traffic reports from the backend proxy, which runs in the main process
	*/
	ipcRenderer.on(Channel.HTTPS_TUNNEL,(ev, m)=>{
		mainController.receiveTunnelReportIpc(m)
	})
		
	ipcRenderer.on(Channel.HTTP_TX,(ev, m)=>{
		mainController.receiveTXReportIpc(m)
	})
})
</script>
</head>
<body id="body">

</body>
</html>