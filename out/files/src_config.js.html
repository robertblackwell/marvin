<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/config.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/ForwardingAgent.html">ForwardingAgent</a></li>
                                <li><a href="../classes/HttpsSlaveMaster.html">HttpsSlaveMaster</a></li>
                                <li><a href="../classes/MitmServer.html">MitmServer</a></li>
                                <li><a href="../classes/Options_object.html">Options_object</a></li>
                                <li><a href="../classes/PerHostnameSlaveMaster.html">PerHostnameSlaveMaster</a></li>
                                <li><a href="../classes/SniSlaveMaster.html">SniSlaveMaster</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/config.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*
* Provides common set of configuation options for testing
*/
var fs = require(&#x27;fs&#x27;)
var path = require(&#x27;path&#x27;)
var cdir = path.resolve(__dirname+&quot;/../certificate-store&quot;)
var caCert = cdir + &quot;/cacert.pem&quot;
var caKey = cdir + &quot;/cakey.pem&quot;
var certificatePath = path.resolve(__dirname + &quot;/../certificate-store/cacert.pem&quot;);
var ca = fs.readFileSync(certificatePath, {encoding: &#x27;utf-8&#x27;});


/**
* @class Options_object
* @config Options_object
*/
var flatOptions = {
	/**
	* These regex determine which requests and responses have their body content captured by the 
	* mitm. The purposes of these selectors is to ensure that we dont try to capture 
	* the body of large requests or responses entirely in a Buffer (the mitm forwarding
	* process uses piping to avoid fully capturing a body, the body only needs to
	* be captured for displaying/monitoring). For example images and videos
	* are prime candidates. They often are large files and there is usually little
	* interest in the content of the body of such requests or responses.
	* @attribute capture
	*/
	capture: [
		RegExp(/^text\/.*$/), 
		RegExp(/^application\/.*$/)				
	],

	/**
	* settings for monitoring https traffic
	*
	* paths to a directory where x509 certificates and keys will be stored for
	* each servername that Marvin intercepts. These are mandatory, Marvin cannot determine defaults for these
	* @attribute certDir
	*/
	certDir 	: cdir,
	/**
	* The path to the certificate for the Certificate Authority that will sign
	* all the servername certificates. This is also manditory as no sensible default is possible
	* @attribute caCertPath
	*/
	caCertPath  : caCert,
	/**
	* The path to the public key for the Certificate Authority that will sign
	* all the servername certificates. This is also manditory as no sensible default is possible
	* @attribute caKeyPath
	*/
	caKeyPath   : caKey,
	
	/**
	* CONNECT requests for hostname on any of these ports will be treated as a
	* https request. And if the servername matches one of the entries in {https_host}
	* then the request will be monitored and the request/response pair
	* provided. If the servername DOES NOT match one of {https_hosts}
	* the reuqested will be tunneled anonamously
	* @attribute https_hosts Regex to match hostnames
	*/
	https_hosts: [/^.*$/],		// regex to identify hosts that should invoke https mitm
	/**
	* @attribute https_ports - port numbers that will be treated as https ports
	*/
	https_ports: [443,9443], 	//ports that will trigger an https proxy
	
	/**
	* Determines how https operates to monitor https traffic. If sni is present and sni === true
	* a single https server backend handles all mitm monitoring for https traffic. That single server
	* uses the SNIcallback property of https.Server to act on behalf of multiple servernames.
	*
	* If sni === undefined or sni === false. A new backend https.Server instance is created for
	* each hostname. These are cached for reuse on subsequent requests to the same hostname 
	* @attribute {bool} sni - if tre use SNI version of HttpsSlaveMaster
	*/
	sni			: true, 

	// Log function - defaults to function noLog(){}
	log 		: function noLog(){}	
}

// var opt = {
// 	slaveMaster : {
// 		sni: true,
// 		certStore : {
// 	 		certDir 	: cdir,
// 	 		caCertPath  : caCert,
// 	 		caKeyPath   : caKey,
// 			log : function noLog(){}
// 		},
// 		log : function noLog(){}
// 	},
// 	response_content_to_capture :[
// 		RegExp(/^text\/.*$/),
// 		RegExp(/^application\/.*$/)
// 	],
// 	htts:{
// 		ports: [443,9443], 	//ports that will trigger an https proxy
// 		hosts: [/^.*$/],		// regex to identify hosts that should invoke https mitm
// 	},
// 	log : function noLog(){}
//
// }
//
// var certStoreOptions = opt.slaveMaster.certStore
// var slaveMasterOptions = opt.slaveMaster
// var mitmOptions = opt;

module.exports = flatOptions;
//
// module.exports = {
// 	options		: flatOptions,
// 	mitm 		: mitmOptions,
// 	slaveMaster	: slaveMasterOptions,
// 	certStore	: certStoreOptions,
// 	ca : ca
// }
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
