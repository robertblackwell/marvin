<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>MitmServer</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/ForwardingAgent.html">ForwardingAgent</a></li>
                                <li><a href="../classes/HttpsSlaveMaster.html">HttpsSlaveMaster</a></li>
                                <li><a href="../classes/MitmServer.html">MitmServer</a></li>
                                <li><a href="../classes/Options_object.html">Options_object</a></li>
                                <li><a href="../classes/PerHostnameSlaveMaster.html">PerHostnameSlaveMaster</a></li>
                                <li><a href="../classes/SniSlaveMaster.html">SniSlaveMaster</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1>MitmServer Class</h1>
<div class="box meta">


        <div class="foundat">
            Defined in: <a href="../files/src_mitm-server.js.html#l46"><code>src&#x2F;mitm-server.js:46</code></a>
        </div>


</div>


<div class="box intro">
    <p>This is the main entry point to the proxy process. It wires together all the bits
required to monitor traffic, select the appropriate processing fo the traffic
and is the distribution center for sending intercepted traffic to the viewing
process.</p>

</div>

    <div class="constructor">
        <h2>Constructor</h2>
<div id="method_MitmServer" class="method item">
    <h3 class="name"><code>MitmServer</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>options</code>
                </li>
            </ul><span class="paren">)</span>
        </div>








    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_mitm-server.js.html#l46"><code>src&#x2F;mitm-server.js:46</code></a>
        </p>



    </div>

    <div class="description">
        
    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">options</code>
                        <span class="type">Options Object</span>


                    <div class="param-description">
                         
                    </div>

                </li>
            </ul>
        </div>



</div>
    </div>

<div id="classdocs" class="tabview">
    <ul class="api-class-tabs">
        <li class="api-class-tab index"><a href="#index">Index</a></li>

            <li class="api-class-tab methods"><a href="#methods">Methods</a></li>
            <li class="api-class-tab attrs"><a href="#attrs">Attributes</a></li>
    </ul>

    <div>
        <div id="index" class="api-class-tabpanel index">
            <h2 class="off-left">Item Index</h2>

                <div class="index-section methods">
                    <h3>Methods</h3>

                    <ul class="index-list methods">
                            <li class="index-item method">
                                <a href="#method_determineConnectAction">determineConnectAction</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_handleConnection">handleConnection</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_reportHttpsTunnel">reportHttpsTunnel</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_reportHttpTransaction">reportHttpTransaction</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_tunnel">tunnel</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_tunnelToHttpsSlave">tunnelToHttpsSlave</a>

                            </li>
                    </ul>
                </div>


                <div class="index-section attrs">
                    <h3>Attributes</h3>

                    <ul class="index-list attrs">
                            <li class="index-item attr">
                                <a href="#attr_default_options">default_options</a>
                            </li>
                    </ul>
                </div>

        </div>

            <div id="methods" class="api-class-tabpanel">
                <h2 class="off-left">Methods</h2>

<div id="method_determineConnectAction" class="method item">
    <h3 class="name"><code>determineConnectAction</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>req</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type">String</span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_mitm-server.js.html#l132"><code>src&#x2F;mitm-server.js:132</code></a>
        </p>



    </div>

    <div class="description">
        <p>We have a CONNECT request - so what are we going to do? This method works that out and returns
a code to tell the outside world</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">req</code>
                        <span class="type">Node::IncomingMessage</span>


                    <div class="param-description">
                        <ul>
<li>incoming client request</li>
</ul>

                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type">String</span>:
                    <p>possible values:</p>
<pre><code>-   &quot;tunnel&quot;        - set up a transparent tunnel between the client socket and the target server
-   &quot;https_slave&quot;   - its a https CONNECT that we want to monitor - tunnel to a https slave that will monitor traffic</code></pre>

            </div>
        </div>


</div>
<div id="method_handleConnection" class="method item">
    <h3 class="name"><code>handleConnection</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>req</code>
                </li>
                <li class="arg">
                        <code>socket</code>
                </li>
            </ul><span class="paren">)</span>
        </div>








    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_mitm-server.js.html#l302"><code>src&#x2F;mitm-server.js:302</code></a>
        </p>



    </div>

    <div class="description">
        <p>Called by the server object when a CONNECT request is received. The two options are:
-   if this is an https request and hostname and port are of interest (as determined by
https_hostname and https_port in the options object) and the request/response are
to be captured then tunnel to a https slave server
-   otherwise connect to the hostname::port and tunnel to that connection</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">req</code>
                        <span class="type">IncomingMessage</span>


                    <div class="param-description">
                        <ul>
<li>a request from client in the form of IncomingMessage. WE need the req
so that we can pipe the message body to the slave server</li>
</ul>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">socket</code>
                        <span class="type">net.Socket</span>


                    <div class="param-description">
                        <ul>
<li>a socket that provides connection to the client</li>
</ul>

                    </div>

                </li>
            </ul>
        </div>



</div>
<div id="method_reportHttpsTunnel" class="method item">
    <h3 class="name"><code>reportHttpsTunnel</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>status</code>
                </li>
                <li class="arg">
                        <code>host</code>
                </li>
                <li class="arg">
                        <code>port</code>
                </li>
            </ul><span class="paren">)</span>
        </div>








    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_mitm-server.js.html#l81"><code>src&#x2F;mitm-server.js:81</code></a>
        </p>



    </div>

    <div class="description">
        <p>Reports a https tunnel event.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">status</code>
                        <span class="type">String</span>


                    <div class="param-description">
                         
                    </div>

                </li>
                <li class="param">
                        <code class="param-name">host</code>
                        <span class="type">String</span>


                    <div class="param-description">
                         
                    </div>

                </li>
                <li class="param">
                        <code class="param-name">port</code>
                        <span class="type">Number</span>


                    <div class="param-description">
                         
                    </div>

                </li>
            </ul>
        </div>



</div>
<div id="method_reportHttpTransaction" class="method item">
    <h3 class="name"><code>reportHttpTransaction</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>protocol</code>
                </li>
                <li class="arg">
                        <code>req</code>
                </li>
                <li class="arg">
                        <code>resp</code>
                </li>
            </ul><span class="paren">)</span>
        </div>








    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_mitm-server.js.html#l101"><code>src&#x2F;mitm-server.js:101</code></a>
        </p>



    </div>

    <div class="description">
        <p>Reports a http or https interchage that was intercepted.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">protocol</code>
                        <span class="type">String</span>


                    <div class="param-description">
                        <p>(https: or http:)</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">req</code>
                        <span class="type">Node::IncomingMessage</span>


                    <div class="param-description">
                        <ul>
<li>an https or http request</li>
</ul>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">resp</code>
                        <span class="type">Node::IncomingMessage</span>


                    <div class="param-description">
                        <ul>
<li>an http or https response</li>
</ul>

                    </div>

                </li>
            </ul>
        </div>



</div>
<div id="method_tunnel" class="method item">
    <h3 class="name"><code>tunnel</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>req</code>
                </li>
                <li class="arg">
                        <code>socket</code>
                </li>
                <li class="arg">
                        <code>targetHost</code>
                </li>
                <li class="arg">
                        <code>targetPort</code>
                </li>
            </ul><span class="paren">)</span>
        </div>








    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_mitm-server.js.html#l213"><code>src&#x2F;mitm-server.js:213</code></a>
        </p>



    </div>

    <div class="description">
        <p>Sets up a anonymous tunnel for an https request</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">req</code>
                        <span class="type">IncomingMessage</span>


                    <div class="param-description">
                        <ul>
<li>incoming client reuqest</li>
</ul>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">socket</code>
                        <span class="type">net.Socket</span>


                    <div class="param-description">
                        <ul>
<li>a socket that provides connection to the client</li>
</ul>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">targetHost</code>
                        <span class="type">String</span>


                    <div class="param-description">
                        <ul>
<li>the hostname of the target server</li>
</ul>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">targetPort</code>
                        <span class="type">Number</span>


                    <div class="param-description">
                        <ul>
<li>the port number of the target server</li>
</ul>

                    </div>

                </li>
            </ul>
        </div>



</div>
<div id="method_tunnelToHttpsSlave" class="method item">
    <h3 class="name"><code>tunnelToHttpsSlave</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>req</code>
                </li>
                <li class="arg">
                        <code>socket</code>
                </li>
                <li class="arg">
                        <code>targetHost</code>
                </li>
            </ul><span class="paren">)</span>
        </div>








    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_mitm-server.js.html#l273"><code>src&#x2F;mitm-server.js:273</code></a>
        </p>



    </div>

    <div class="description">
        <p>This method tunnels to one of the https slave servers if it has been determined that this
https interaction will be captured.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">req</code>
                        <span class="type">IncomingMessage</span>


                    <div class="param-description">
                        <ul>
<li>a request from client in the form of IncomingMessage. WE need the req
so that we can pipe the message body to the slave server</li>
</ul>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">socket</code>
                        <span class="type">net.Socket</span>


                    <div class="param-description">
                        <ul>
<li>a socket that provides connection to the client</li>
</ul>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">targetHost</code>
                        <span class="type">String</span>


                    <div class="param-description">
                        <ul>
<li>the hostname of the target server</li>
</ul>

                    </div>

                </li>
            </ul>
        </div>



</div>
            </div>


            <div id="attrs" class="api-class-tabpanel">
                <h2 class="off-left">Attributes</h2>

                    <div id="attr_default_options" class="attr item">
                        <a name="config_default_options"></a> 
                        <h3 class="name"><code>default_options</code></h3>
                        <span class="type"></span>
                    
                    
                    
                    
                    
                    
                    
                    
                        <div class="meta">
                                    <p>
                                    Defined in
                            <a href="../files/src_mitm-server.js.html#l17"><code>src&#x2F;mitm-server.js:17</code></a>
                            </p>
                    
                    
                        </div>
                    
                        <div class="description">
                            <p>This is the set of default options used by {MitmServer} and the classes/modules it invokes</p>
                    
                        </div>
                    
                    
                    
                    </div>
            </div>

    </div>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
